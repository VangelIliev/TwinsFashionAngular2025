<section class="cart" *ngIf="hasItems; else emptyCart">
  <div class="cart__items">
    <header class="cart__header">
      <h1>–í–∞—à–∞—Ç–∞ –∫–æ–ª–∏—á–∫–∞</h1>
    </header>

    <div class="cart__list">
      <article class="cart__item" *ngFor="let item of items">
        <div class="cart__item-media">
          <img [src]="item.imageUrl" [alt]="item.title" loading="lazy" />
        </div>

        <div class="cart__item-info">
          <h2>{{ item.title }}</h2>
          <div class="cart__item-meta">
            <span class="cart__item-label">–†–∞–∑–º–µ—Ä:</span>
            <span class="cart__item-value">{{ item.size || '–°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω' }}</span>
          </div>
          <div class="cart__item-meta">
            <span class="cart__item-label">–ï–¥. —Ü–µ–Ω–∞:</span>
            <span class="cart__item-value">{{ item.price | number:'1.2-2' }} –ª–≤</span>
          </div>
        </div>

        <div class="cart__item-actions">
          <div class="cart__quantity">
            <button type="button" (click)="decrement(item)" aria-label="–ù–∞–º–∞–ª–∏">‚àí</button>
            <span>{{ item.quantity }}</span>
            <button type="button" (click)="increment(item)" aria-label="–£–≤–µ–ª–∏—á–∏">+</button>
          </div>
          <button class="cart__remove" type="button" (click)="remove(item)">
            <span aria-hidden="true">üóëÔ∏è</span>
            –ü—Ä–µ–º–∞—Ö–Ω–∏
          </button>
        </div>

        <div class="cart__item-total">
          {{ (item.price * item.quantity) | number:'1.2-2' }} –ª–≤
        </div>
      </article>
    </div>

    <footer class="cart__footer">
      <div class="cart__cta">
        <a routerLink="/clothes" class="cart__back">‚Üê –ü—Ä–æ–¥—ä–ª–∂–∏ –ø–∞–∑–∞—Ä—É–≤–∞–Ω–µ—Ç–æ</a>
      </div>
    </footer>
  </div>

  <aside class="cart__summary">
    <section class="cart__shipping">
      <h3>–î–æ—Å—Ç–∞–≤–∫–∞</h3>
      <p>–ú–æ–ª—è –ø–æ–ø—ä–ª–Ω–µ—Ç–µ –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞.</p>
      <form class="cart__shipping-form" novalidate #orderForm="ngForm">
        <div class="cart__form-field" [class.cart__form-field--error]="validationErrors.customerName">
          <input type="text" name="customerName" placeholder="–ò–º–µ –∏ —Ñ–∞–º–∏–ª–∏—è" required
                 [(ngModel)]="order.customerName" (blur)="onFieldBlur('customerName')" />
          <small *ngIf="validationErrors.customerName">{{ validationErrors.customerName }}</small>
        </div>

        <div class="cart__form-field" [class.cart__form-field--error]="validationErrors.city">
          <input type="text" name="city" placeholder="–ì—Ä–∞–¥" required
                 [(ngModel)]="order.city" (blur)="onFieldBlur('city')" />
          <small *ngIf="validationErrors.city">{{ validationErrors.city }}</small>
        </div>

        <div class="cart__form-field" [class.cart__form-field--error]="validationErrors.deliveryPlace">
          <select name="deliveryPlace" required [(ngModel)]="order.deliveryPlace" (change)="onFieldBlur('deliveryPlace')">
            <option value="" disabled>–ò–∑–±–µ—Ä–µ—Ç–µ –º—è—Å—Ç–æ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞</option>
            <option value="–ïcont office">–û—Ñ–∏—Å –Ω–∞ –ï–∫–æ–Ω—Ç</option>
            <option value="Address">–ê–¥—Ä–µ—Å</option>
          </select>
          <small *ngIf="validationErrors.deliveryPlace">{{ validationErrors.deliveryPlace }}</small>
        </div>

        <div class="cart__form-field" [class.cart__form-field--error]="validationErrors.deliveryAddress">
          <input type="text" name="deliveryAddress" placeholder="–ê–¥—Ä–µ—Å –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞" required
                 [(ngModel)]="order.deliveryAddress" (blur)="onFieldBlur('deliveryAddress')" />
          <small *ngIf="validationErrors.deliveryAddress">{{ validationErrors.deliveryAddress }}</small>
        </div>

        <div class="cart__form-field" [class.cart__form-field--error]="validationErrors.phone">
          <input type="tel" name="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω–µ–Ω –Ω–æ–º–µ—Ä" required
                 [(ngModel)]="order.phone" (blur)="onFieldBlur('phone')" />
          <small *ngIf="validationErrors.phone">{{ validationErrors.phone }}</small>
        </div>
      </form>
    </section>

    <div class="cart__summary-card">
      <h2>–û–±—â–∞ —Ü–µ–Ω–∞</h2>
      <div class="cart__summary-row">
        <span>–ú–µ–∂–¥–∏–Ω–Ω–∞ —Å—É–º–∞</span>
        <span>{{ subtotal | number:'1.2-2' }} –ª–≤</span>
      </div>
      <div class="cart__summary-row cart__summary-row--total">
        <span>–û–±—â–æ</span>
        <span>{{ total | number:'1.2-2' }} –ª–≤</span>
      </div>
      <button type="button" class="cart__checkout" (click)="submitOrder()" [disabled]="orderSubmitting">
        {{ orderSubmitting ? '–ò–∑–ø—Ä–∞—â–∞–Ω–µ...' : '–ü–æ—Ä—ä—á–∞–π' }}
      </button>
      <p *ngIf="orderSuccess" class="cart__success">–ü–æ—Ä—ä—á–∫–∞—Ç–∞ –±–µ—à–µ –∏–∑–ø—Ä–∞—Ç–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!</p>
      <p *ngIf="orderError" class="cart__error">–í—ä–∑–Ω–∏–∫–Ω–∞ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∞—Ç–∞. –û–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ.</p>
    </div>
  </aside>
</section>

<ng-template #emptyCart>
  <section class="cart cart--empty">
    <div class="cart--empty__content">
      <h2>–ö–æ–ª–∏—á–∫–∞—Ç–∞ –µ –ø—Ä–∞–∑–Ω–∞</h2>
      <p>–î–æ–±–∞–≤–µ—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏, –∑–∞ –¥–∞ —Ñ–∏–Ω–∞–ª–∏–∑–∏—Ä–∞—Ç–µ –ø–æ—Ä—ä—á–∫–∞—Ç–∞ —Å–∏.</p>
      <a routerLink="/clothes" class="cart__back">–ó–∞–ø–æ—á–Ω–∏ –ø–∞–∑–∞—Ä—É–≤–∞–Ω–µ</a>
    </div>
  </section>
</ng-template>
